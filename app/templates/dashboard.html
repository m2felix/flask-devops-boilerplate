<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ“Š Live System Dashboard</title>
    <style>
        body {
            font-family: monospace;
            background: #0d0d0d;
            color: #00ff66;
            text-align: center;
            padding: 20px;
        }
        .terminal-box {
            display: inline-block;
            text-align: left;
            border: 2px solid #00ff66;
            padding: 10px 20px;
            background: black;
            min-width: 350px;
        }
        .metric {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>ðŸ“Š Live System Dashboard</h1>

    <div class="terminal-box">
        <div class="metric" id="cpu">CPU Usage: Loading...</div>
        <div class="metric" id="memory">Memory: Loading...</div>
        <div class="metric" id="requests">Requests/sec: Loading...</div>
        <div class="metric" id="errors">Errors: Loading...</div>
        <div class="metric" id="response-time">Response Time: Loading...</div>
    </div>

    <script>
        async function fetchStats() {
            try {
                let res = await fetch('/api/system-stats');
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                let data = await res.json();

                document.getElementById('cpu').innerText = `CPU Usage: ${data.cpu}%`;
                document.getElementById('memory').innerText = `Memory: ${data.memory}%`;
                document.getElementById('requests').innerText = `Requests/sec: ${data.requests_sec ?? 0}`;
                document.getElementById('errors').innerText = `Errors: ${data.errors ?? 0}`;
                document.getElementById('response-time').innerText = `Response Time: ${data.response_time ?? 'N/A'} ms`;
            } catch (err) {
                console.error("Error fetching stats:", err);
            }
        }

        setInterval(fetchStats, 2000);
        fetchStats();
    </script>
</body>
</html>

